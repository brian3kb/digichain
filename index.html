<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8"/>
  <meta name = "viewport" content = "width=device-width, minimum-scale=1.0, maximum-scale = 1.0, user-scalable = no">
  <meta name="author" content="Brian Barnett [ sfxBrian / brian3kb ]" />
  <meta name="version" content="v 1.3.0" />
  <meta
          name="description"
          content="DigiChain loads uncompressed wav files or syx samples for/from the Machinedrum and converts them to wav files for transfer via the Transfer app. The converted files can also be joined together without, or with padding to work better with the 1.5 firmware Digitakt slice grids. Files are generated at the chosen session sample rate and bit depth. When the slice-grid is on, the last sample in the chain will be repeated to pad to the selected grid size."
  />
  <meta name="google-site-verification" content="W97nmMeI8CcybxJA7gLG-CFeJmztv03Jh9_bTExYJLY" />
  <title>DigiChain</title>
  <link rel="stylesheet" href="main.css">
  <style>
    tr.file-row:has(.toggle-check:not(.button-outline)):nth-of-type(0) { outline: red solid 3px; border-color: rgb(187, 0, 0); }
  </style>
  <script type="module" src="./main.js"></script>
</head>

<body>
<div class="header-menu">
  <div class="file-num">
    <label for="fileNum" class="float-left" style="padding-left: 1rem;">Loaded/Selected</label>
    <output class="float-left" id="fileNum">0/0</output>
  </div>
  <div id="toggleOptionsButton" onclick="digichain.toggleOptionsPanel()"><i class="gg-select-r"></i></div>
</div>

<div class="loading-message">
  <div><i class="gg-spinner"></i><span id="loadingText" class="gradient-text">Loading samples</span></div>
</div>
<div class="container">
  <div id="allOptionsPanel" class="row all-options">
    <div class="column left-buttons">

      <div class="row">
        <label class="button" for="uploadInput">Load Files...</label>
        <input id="uploadInput" type="file" multiple/>
          <select title="Change audio file export settings." onchange="digichain.changeAudioConfig(event)" data-selection="m4800016" class="btn-audio-config gg-calibrate" name="audioConfigOptions" id="audioConfigOptions">
            <option value="m4410016">44.1K/16BIT MONO</option>
            <option value="s4410016">44.1K/16BIT STEREO</option>
            <option value="m4410024">44.1K/24BIT MONO</option>
            <option value="s4410024">44.1K/24BIT STEREO</option>
            <option value="m4800016" selected>48K/16BIT MONO</option>
            <option value="s4800016">48K/16BIT STEREO</option>
            <option value="m4800024">48K/24BIT MONO</option>
            <option value="s4800024">48K/24BIT STEREO</option>
          </select>
      </div>
      <div class="row">
        <button class="button" onclick="digichain.removeSelected()">Remove Selected</button>
<!--      </div>-->
<!--      <div class="row">-->
        <button title="Reset list to the order in which files were added to the pool." class="button button-outline" onclick="digichain.sort('id')">Reset Sort/Order</button>
      </div>
    </div>
    <div class="column">
    </div>
    <div class="column-33 align-right right-buttons">
      <div class="download-buttons">
        <button class="btn-download" onclick="digichain.downloadAll()"><i class="gg-software-download"></i><span class="selection-count"> - </span></button>
        <button title="Download the selected samples joined. Shift+click will resample back to the list." class="btn-download has-shift-mod" onclick="digichain.joinAll(event)"><i class="gg-software-download"></i><span class="join-count"> - </span> Joined</button>
      </div>
      <div class="slice-group master-slices" title="Change the slice grid size. Shift+click will change the grid without changing the number of selected samples. Ctrl+click will allow setting a custom grid size.">
        <button onclick="digichain.selectSliceAmount(event, digichain.sliceOptions[1])" class="button-outline has-shift-mod has-ctrl-mod check sel-1" data-sel="1">4</button>
        <button onclick="digichain.selectSliceAmount(event, digichain.sliceOptions[2])" class="button-outline has-shift-mod has-ctrl-mod check sel-2" data-sel="2">8</button>
        <button onclick="digichain.selectSliceAmount(event, digichain.sliceOptions[3])" class="button-outline has-shift-mod has-ctrl-mod check sel-3" data-sel="3">16</button>
        <button onclick="digichain.selectSliceAmount(event, digichain.sliceOptions[4])" class="button-outline has-shift-mod has-ctrl-mod check sel-4" data-sel="4">32</button>
        <button onclick="digichain.selectSliceAmount(event, digichain.sliceOptions[5])" class="button-outline has-shift-mod has-ctrl-mod check sel-5" data-sel="5">64</button>
        <button onclick="digichain.selectSliceAmount(event, digichain.sliceOptions[6])" class="button-outline has-shift-mod has-ctrl-mod check sel-6" data-sel="6">120</button><br>
        <button title="Turn off slice grid" onclick="digichain.selectSliceAmount(event, 0)" class="button check has-shift-mod has-ctrl-mod sel-0" data-sel="0">Off</button>
        <button title="Download the selected samples joined, spaced evenly. Shift+click will resample back to the list." class="min-width-20 dl-spaced has-shift-mod" onclick="digichain.joinAll(event, true)"><i class="gg-software-download"></i><span class="join-count"> - </span> Joined (Spaced)</button>
        <a id="getJoined">_</a>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="column">
      <table>
        <thead>
        <tr>
          <th class="w-0"></th>
          <th class="w-0"><a title="Click to sort." onclick="digichain.sort('checked')" class="sort-by-selected">Selected</a></th>
          <th class="w-0"></th>
          <th></th>
          <th style="width: 180px;"></th>
          <th>
            <a title="Click to sort." onclick="digichain.sort('name')">Filename / Download</a>
            <a title="Click to sort." onclick="digichain.sort('sliceNumber')"> - slice # - </a>
          </th>
          <th><a title="Click to sort." id="lengthHeaderLink" onclick="digichain.sort('length')">Length (s)</a></th>
          <th class="w-0"></th>
          <th class="w-0"></th>
          <th class="w-0"></th>
          <th class="w-0"></th>
        </tr>
        </thead>
        <tbody id="fileList">
        <tr><td class="no-files" colspan="9"><h4>Load/Drag in some samples to get started...</h4></td></tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row info-panel">
    <div class="column column-35 column-offset-75 logo">
      <h3 class="float-right">DigiChain <i class="gg-info float-right" style="cursor: pointer;" onclick="digichain.showInfo()"></i> </h3>
    </div>
  </div>
</div>

<div id="infoPanelMd" class="info-panel-md pop-up">
  <a class="float-right" onclick="document.getElementById('infoPanelMd').style.display = 'none'"><i class="gg-close"></i></a>
  <div class="content"></div>
</div>

<div id="splitOptions" class="split-panel-options pop-up">
  <a class="float-right" onclick="document.getElementById('splitOptions').style.display = 'none'"><i class="gg-close"></i></a>
  <p>
    Choose how many slices to make from '<span id="splitFileName"></span>'
  </p>
  <div class="slice-group">
    <button onclick="digichain.splitAction(event, false, 2)" class="button-outline has-shift-mod check sel-0" data-sel="1">2</button>
    <button onclick="digichain.splitAction(event, false, 4)" class="button-outline has-shift-mod check sel-1" data-sel="1">4</button>
    <button onclick="digichain.splitAction(event, false, 8)" class="button-outline has-shift-mod check sel-2" data-sel="2">8</button>
    <button onclick="digichain.splitAction(event, false, 16)" class="button-outline has-shift-mod check sel-3" data-sel="3">16</button>
    <button onclick="digichain.splitAction(event, false, 32)" class="button-outline has-shift-mod check sel-4" data-sel="4">32</button>
    <button onclick="digichain.splitAction(event, false, 64)" class="button-outline has-shift-mod check sel-5" data-sel="5">64</button>
    <button onclick="digichain.splitAction(event, false, 128)" class="button-outline has-shift-mod check sel-6" data-sel="6">128</button>
    <button id="sliceByOtButton" onclick="digichain.splitAction(event, false, 'ot')" class="button-outline has-shift-mod check sel-7 sel-ot" data-sel="7">OT</button>
  </div>
</div>

<div class="touch-buttons">
  <button id="modifierKeyshiftKey" title="Locks the shift key (useful for touch users with no keyboard access)." onclick="digichain.toggleModifier('shiftKey')" class="button-outline">SHIFT</button>
  <button id="modifierKeyctrlKey" title="Locks the ctrl key (useful for touch users with no keyboard access)." onclick="digichain.toggleModifier('ctrlKey')" class="button-outline">CTRL</button>
</div>

</body>
</html>
